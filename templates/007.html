{% extends "base.html" %}
{% block title %} Case Pidoras {% endblock %}

{% block content %}
<style>
    body {
        background-color: #121212;
        color: white;
        text-align: center;
        font-family: Arial, sans-serif;
        padding-top: 50px;
    }

    button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 18px;
        background-color: #1e1e1e;
        color: white;
        border: 1px solid #444;
        border-radius: 5px;
        cursor: pointer;
    }

    .case-container {
        width: 500px;
        height: 100px;
        overflow: hidden;
        border: 3px solid #888;
        margin: 0 auto;
        background-color: #222;
        position: relative;
    }

    .case-strip {
        display: flex;
        transition: transform 3s ease-out;
    }

    .item {
        width: 100px;
        height: 100px;
        object-fit: cover;
        flex-shrink: 0;
        border: 1px solid #444;
    }

    .case-container::after {
        content: "";
        position: absolute;
        left: 50%;
        top: 0;
        transform: translateX(-50%);
        width: 2px;
        height: 100%;
        background-color: red;
    }
</style>

<div class="case-container">
    <div class="case-strip" id="case-strip"></div>
</div>

<button onclick="rollCase()">Открыть кейс</button>

<script>
    const images = [
        "images/item1.jpg",
        "images/item2.jpg",
        "images/item3.jpg",
        "images/item4.jpg",
        "images/item5.jpg"
    ];

    function rollCase() {
        const strip = document.getElementById("case-strip");
        strip.innerHTML = "";
        strip.style.transition = "none";
        strip.style.transform = "translateX(0)";

        const imagesToShow = [];
        const totalItems = 30;
        const itemWidth = 100;
        const visibleItems = 5;
        const centerIndex = visibleItems / 2;
        const stopIndex = totalItems - centerIndex - 1;
        const offset = stopIndex * itemWidth;

        for (let i = 0; i < totalItems; i++) {
            const img = document.createElement("img");
            img.src = images[Math.floor(Math.random() * images.length)];
            img.className = "item";
            imagesToShow.push(img);
        }

        imagesToShow.forEach(img => strip.appendChild(img));

        setTimeout(() => {
            strip.style.transition = "transform 3s ease-out";
            strip.style.transform = `translateX(-${offset}px)`;
        }, 30);
    }

</script>
{% endblock %}